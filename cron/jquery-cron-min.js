!function(c){for(var d={initial:"* * * * *",minuteOpts:{minWidth:100,itemWidth:30,columns:4,rows:void 0,title:"Minutes Past the Hour"},timeHourOpts:{minWidth:100,itemWidth:20,columns:2,rows:void 0,title:"Time: Hour"},domOpts:{minWidth:100,itemWidth:30,columns:void 0,rows:10,title:"Day of Month"},monthOpts:{minWidth:100,itemWidth:100,columns:2,rows:void 0,title:void 0},dowOpts:{minWidth:100,itemWidth:void 0,columns:void 0,rows:void 0,title:void 0},timeMinuteOpts:{minWidth:100,itemWidth:20,columns:4,rows:void 0,title:"Time: Minute"},effectOpts:{openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:!0},url_set:void 0,customValues:void 0,onChange:void 0,useGentleSelect:!1},u="",e=0;e<60;e++){u+="<option value='"+e+"'>"+(e<10?"0":"")+e+"</option>\n"}var m="";for(e=0;e<24;e++){m+="<option value='"+e+"'>"+(e<10?"0":"")+e+"</option>\n"}var h="";for(e=1;e<32;e++){if(1==e||21==e||31==e)var t="st";else if(2==e||22==e)t="nd";else if(3==e||23==e)t="rd";else t="th";h+="<option value='"+e+"'>"+e+t+"</option>\n"}var p="",n=["January","February","March","April","May","June","July","August","September","October","November","December"];for(e=0;e<n.length;e++)p+="<option value='"+(e+1)+"'>"+n[e]+"</option>\n";var v="",i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(e=0;e<i.length;e++)v+="<option value='"+e+"'>"+i[e]+"</option>\n";v+="<option value='1-5'>Weekdays</option>\n",v+="<option value='0,6'>Weekends</option>\n";var f="",a=["minute","hour","day","week","month","year"];for(e=0;e<a.length;e++)f+="<option value='"+a[e]+"'>"+a[e]+"</option>\n";var y={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},k={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}\d{1,2}$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/};function b(e){return void 0!==e}function O(e,t){if(b(t.customValues))for(key in t.customValues)if(e==t.customValues[key])return key;if("string"==typeof e&&/^((\d{1,2}|\*)\s){4}(\d{1,2}|\*)$/.test(e)){for(var n=e.split(" "),i=[0,0,1,1,0],a=[59,23,31,12,6],s=0;s<n.length;s++)if("*"!=n[s]){var r=parseInt(n[s]);if(!(b(r)&&r<=a[s]&&i[s]<=r))return void c.error("cron: invalid value found (col "+(s+1)+") in "+o.initial)}for(var l in k)if(k[l].test(e))return l;c.error("cron: valid but unsupported cron format. sorry.")}else c.error("cron: invalid initial value")}function g(e,t){if(!b(O(t.initial,t)))return!0;if(b(o=t.customValues)&&"object"!=typeof o)return!0;var o;if(b(t.customValues))for(key in t.customValues)if(k.hasOwnProperty(key))return c.error("cron: reserved keyword '"+key+"' should not be used as customValues key."),!0;return!1}var w={init:function(e){var t=e||{},o=c.extend([],d,t),n=c.extend({},d.effectOpts,t.effectOpts);if(c.extend(o,{minuteOpts:c.extend({},d.minuteOpts,n,t.minuteOpts),domOpts:c.extend({},d.domOpts,n,t.domOpts),monthOpts:c.extend({},d.monthOpts,n,t.monthOpts),dowOpts:c.extend({},d.dowOpts,n,t.dowOpts),timeHourOpts:c.extend({},d.timeHourOpts,n,t.timeHourOpts),timeMinuteOpts:c.extend({},d.timeMinuteOpts,n,t.timeMinuteOpts)}),g(0,o))return this;var i=[],a="",s=o.customValues;if(b(s))for(var r in s)a+="<option value='"+s[r]+"'>"+r+"</option>\n";i.period=c("<span class='cron-period'>Every <select name='cron-period'>"+a+f+"</select> </span>").appendTo(this).data("root",this);var l=i.period.find("select");return l.bind("change.cron",S.periodChanged).data("root",this),o.useGentleSelect&&l.gentleSelect(n),i.dom=c("<span class='cron-block cron-block-dom'> on the <select name='cron-dom'>"+h+"</select> </span>").appendTo(this).data("root",this),l=i.dom.find("select").data("root",this),o.useGentleSelect&&l.gentleSelect(o.domOpts),i.month=c("<span class='cron-block cron-block-month'> of <select name='cron-month'>"+p+"</select> </span>").appendTo(this).data("root",this),l=i.month.find("select").data("root",this),o.useGentleSelect&&l.gentleSelect(o.monthOpts),i.mins=c("<span class='cron-block cron-block-mins'> at <select name='cron-mins'>"+u+"</select> minutes past the hour </span>").appendTo(this).data("root",this),l=i.mins.find("select").data("root",this),o.useGentleSelect&&l.gentleSelect(o.minuteOpts),i.dow=c("<span class='cron-block cron-block-dow'> on <select name='cron-dow'>"+v+"</select> </span>").appendTo(this).data("root",this),l=i.dow.find("select").data("root",this),o.useGentleSelect&&l.gentleSelect(o.dowOpts),i.time=c("<span class='cron-block cron-block-time'> at <select name='cron-time-hour' class='cron-time-hour'>"+m+"</select>:<select name='cron-time-min' class='cron-time-min'>"+u+" </span>").appendTo(this).data("root",this),l=i.time.find("select.cron-time-hour").data("root",this),o.useGentleSelect&&l.gentleSelect(o.timeHourOpts),l=i.time.find("select.cron-time-min").data("root",this),o.useGentleSelect&&l.gentleSelect(o.timeMinuteOpts),i.controls=c("<span class='cron-controls'>&laquo; save <span class='cron-button cron-button-save'></span> </span>").appendTo(this).data("root",this).find("span.cron-button-save").bind("click.cron",S.saveClicked).data("root",this).end(),this.find("select").bind("change.cron-callback",S.somethingChanged),this.data("options",o).data("block",i),this.data("current_value",o.initial),w.value.call(this,o.initial)},value:function(e){if(!e)return function(e){var t=e.data("block"),o=hour=day=month=dow="*",n=t.period.find("select").val();switch(n){case"minute":break;case"hour":o=t.mins.find("select").val();break;case"day":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val();break;case"week":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),dow=t.dow.find("select").val();break;case"month":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),day=t.dom.find("select").val();break;case"year":o=t.time.find("select.cron-time-min").val(),hour=t.time.find("select.cron-time-hour").val(),day=t.dom.find("select").val(),month=t.month.find("select").val();break;default:return n}return[o,hour,day,month,dow].join(" ")}(this);var t=this.data("options"),o=this.data("block"),n=t.useGentleSelect,i=O(e,t);if(!b(i))return!1;if(b(t.customValues)&&t.customValues.hasOwnProperty(i))i=t.customValues[i];else for(var a=e.split(" "),s={mins:a[0],hour:a[1],dom:a[2],month:a[3],dow:a[4]},r=y[i],l=0;l<r.length;l++){var c=r[l];if("time"==c){var d=o[c].find("select.cron-time-hour").val(s.hour);n&&d.gentleSelect("update"),d=o[c].find("select.cron-time-min").val(s.mins),n&&d.gentleSelect("update")}else{d=o[c].find("select").val(s[c]);n&&d.gentleSelect("update")}}var u=o.period.find("select").val(i);return n&&u.gentleSelect("update"),u.trigger("change"),this}},S={periodChanged:function(){var e=c(this).data("root"),t=e.data("block"),o=(e.data("options"),c(this).val());if(e.find("span.cron-block").hide(),y.hasOwnProperty(o))for(var n=y[c(this).val()],i=0;i<n.length;i++)t[n[i]].show()},somethingChanged:function(){root=c(this).data("root"),b(root.data("options").url_set)?w.value.call(root)!=root.data("current_value")?(root.addClass("cron-changed"),root.data("block").controls.fadeIn()):(root.removeClass("cron-changed"),root.data("block").controls.fadeOut()):root.data("block").controls.hide();var e=root.data("options").onChange;b(e)&&c.isFunction(e)&&e.call(root)},saveClicked:function(){var e=c(this),t=e.data("root"),o=w.value.call(t);e.hasClass("cron-loading")||(e.addClass("cron-loading"),c.ajax({type:"POST",url:t.data("options").url_set,data:{cron:o},success:function(){t.data("current_value",o),e.removeClass("cron-loading"),o==w.value.call(t)&&(t.removeClass("cron-changed"),t.data("block").controls.fadeOut())},error:function(){alert("An error occured when submitting your request. Try again?"),e.removeClass("cron-loading")}}))}};c.fn.cron=function(e){return w[e]?w[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("Method "+e+" does not exist on jQuery.cron"):w.init.apply(this,arguments)}}(jQuery);